基本操作：
以下是常用的 Git 命令总结，分为 基本操作、分支管理、提交管理、撤销更改 和 其他工具 五类。
1. 基本操作
初始化仓库：git init
克隆远程仓库：git clone <repository_url>
查看状态：git status
查看历史记录：git log
git log --oneline  简洁显示
查看文件变更：git diff
git diff <file>  查看指定文件的变更

2. 分支管理
查看所有分支：git branch
创建分支：git branch <branch_name>
切换分支：git checkout <branch_name>
创建并切换分支：git checkout -b <branch_name>
删除分支：
git branch -d <branch_name>       删除已合并分支
git branch -D <branch_name>       强制删除未合并分支
合并分支：git merge <branch_name>
查看分支图：git log --graph --all --oneline --decorate

3. 提交管理
暂存更改：git add <file>
git add .  暂存所有更改
提交更改：git commit -m "提交信息"
修改上一次提交（不产生新提交）：git commit --amend
推送到远程仓库：git push origin <branch_name>
从远程仓库拉取最新代码：git pull origin <branch_name>

4. 撤销更改
撤销工作区的更改：git checkout -- <file>
撤销暂存区的更改：git reset HEAD <file>
撤销最近一次提交（保留更改）：git reset --soft HEAD~1
撤销最近一次提交（清空更改）：git reset --hard HEAD~1
恢复到某次提交：git reset --hard <commit_hash>
查看操作历史：git reflog
撤销合并：
合并未提交：git merge --abort
合并已提交：git revert -m 1 <merge_commit_hash>

5. 其他工具
备份代码为 ZIP 文件：git archive --format=zip --output=<path_to_zip> <commit_hash>
清理未跟踪文件：git clean -f
git clean -fd  包括未跟踪的文件夹
查看远程仓库地址：git remote -v
强制覆盖本地代码（谨慎使用）：git fetch origin
git reset --hard origin/<branch_name>

快捷操作总结
查看状态和日志：
git status
git log --oneline --graph
暂存与提交：
git add .
git commit -m "说明"
撤销操作：
git reset --hard HEAD~1       撤销上次提交
git checkout -- <file>        撤销文件修改
git reflog                    查看操作历史
分支管理：
git branch -a                 查看所有分支
git checkout -b <branch_name> 创建并切换分支
git merge <branch_name>       合并分支







一、备份代码文件
方法 1：创建一个新分支并保存中间版本
你可以通过 **创建一个新分支** 来保存当前版本的所有文件。这个方法可以确保你不丢失任何文件，并且可以在未来恢复。
步骤：
1. 查看 Git 提交历史，找到你想保存的中间版本的提交哈希值：
   git log --oneline
2. 创建一个新的分支并切换到该分支：
   假设你想保存的提交哈希为 `abc1234`，你可以执行以下命令：
   git checkout -b backup-branch abc1234
   这会从该提交创建一个新的分支，并切换到该分支。
3. 将该分支推送到远程（可选）：
   如果你想确保这些更改在远程仓库也能保留，可以推送该分支：
   git push origin backup-branch
4. 返回主分支：
   如果你不想继续在备份分支上工作，可以切换回你的主分支（例如 `main` 或 `master`）：
   git checkout main
方法 2：使用 `git archive` 创建备份
`git archive` 是一个非常实用的工具，它可以将整个项目的某个版本打包成一个压缩文件（如 `.zip` 或 `.tar`）。这适用于你想将中间版本的所有代码文件保存为一个备份文件。
步骤：
1. 查看 Git 提交历史，找到你想保存的中间版本的提交哈希值：
   git log --oneline
2. 使用 `git archive` 创建备份：
   假设你想保存的版本是 `abc1234`，你可以执行以下命令来创建 `.zip` 文件：
   git archive --format=zip --output=/path/to/backup.zip abc1234
git archive --format=zip --output="E:/MIEFL1_Project/Debug/Debug_File"/250115.zip 1605821
   这样，Git 会将提交 `abc1234` 的所有代码文件打包成一个 `.zip` 文件，保存在你指定的位置。你可以根据需要选择 `.tar` 格式或者其他格式。
3. 确认备份：
   确保你已成功创建了备份文件 `/path/to/backup.zip`。如果需要，可以将该备份文件拷贝到其他位置。
方法 3：将文件复制到备份目录
如果你只想手动备份代码文件，而不涉及 Git 的版本控制，可以直接将中间版本的文件复制到其他目录进行备份。
步骤：
1. 查看 Git 提交历史，找到你想保存的中间版本的提交哈希值：
   git log --oneline
2. 使用 `git checkout` 恢复中间版本的文件：
   假设你想保存的版本是 `abc1234`，你可以恢复该版本的文件：
   git checkout abc1234
3. 复制文件到备份目录：
   将所有文件复制到一个备份目录：
   cp -r . /path/to/backup/directory/
   这样，你就将所有中间版本的文件复制到了指定的备份目录中。
方法 4：创建补丁文件保存更改
如果你只需要保存中间版本的更改（而非整个代码文件），可以创建一个补丁文件，它保存了从上一个提交到当前提交之间的所有修改。
步骤：
1. 查看 Git 提交历史，找到你想保存的中间版本的提交哈希值：
   git log --oneline
2. 创建补丁文件：
   使用 `git format-patch` 创建一个补丁文件，保存当前提交到上一个提交之间的更改：
   git format-patch -1 abc1234
   这将创建一个 `.patch` 文件，包含从上一个提交到 `abc1234` 提交的所有更改。
3. 保存补丁文件：
   将 `.patch` 文件保存到你指定的位置，这样你就能保留中间版本的更改。
方法 5：使用 `git clone` 备份整个仓库
如果你希望备份整个仓库的当前状态（包括所有提交历史），你可以通过 `git clone` 将整个仓库复制到另一个目录中。
步骤：
1. 查看 Git 提交历史**，找到你想保存的中间版本的提交哈希值：
   git log --oneline
2. 在另一个目录中克隆仓库：
   假设你希望将当前仓库备份到 `/path/to/backup-repo/`，可以使用以下命令：
   git clone /path/to/your/repo /path/to/backup-repo/
   这样，你就可以在另一个位置拥有完整的仓库副本，包括所有提交历史。





二、修改中间版本但是不更新新的提交
要修改 Git 中的中间版本，并确保只替换修改部分，同时不影响其他未修改部分的文件，需要使用 **交互式变基（interactive rebase）** 和 **暂存操作（staging）** 来实现。以下是具体步骤：
操作步骤
1. 确定需要修改的中间版本
- 首先，查看提交历史，找到你需要修改的中间版本的哈希值：
  git log --oneline
  假设提交历史如下：
  plaintext
  a1b2c3d (HEAD -> main) Latest commit
  e4f5g6h Second commit
  i7j8k9l Initial commit
  你需要修改 `Second commit`（哈希值为 `e4f5g6h`）。
2. 交互式变基到目标版本
- 使用以下命令开启交互式变基，修改最近 N 次提交（假设修改最近 3 次中的某一提交）：
  git rebase -i HEAD~3
- 编辑器会打开一个提交列表：
  ```plaintext
  pick a1b2c3d Latest commit
  pick e4f5g6h Second commit
  pick i7j8k9l Initial commit
- 将需要修改的提交前的 `pick` 改为 `edit`：
  ```plaintext
  pick a1b2c3d Latest commit
  edit e4f5g6h Second commit
  pick i7j8k9l Initial commit
3. 修改代码
- Git 会暂停在你选择的提交（`Second commit`）并提示：
  ```plaintext
  Stopped at e4f5g6h... Second commit
  You can amend the commit now, with
    git commit --amend
  Once you're satisfied with your changes, run
    git rebase --continue
- 此时，你的工作区内容会回到 `Second commit` 的状态。
1. 修改需要的文件。
2. 使用 `git add` 暂存修改的部分文件：
   git add <file>
   **注意**：只暂存你想要更新的文件或部分内容。
#### 4. 更新提交
- 运行以下命令更新提交（不会影响未修改的部分）：
  git commit --amend --no-edit
  这里的 `--no-edit` 表示不修改原提交的提交信息。
5. 继续变基
- 完成修改后，继续执行变基：
  git rebase --continue
6. 检查结果
- 变基完成后，重新查看提交历史，确保修改已经正确更新：
  git log --oneline
注意事项
1. 避免对远程仓库的提交直接修改：  
   如果中间版本已经推送到远程仓库，修改后需要强制推送：
   git push --force
   强制推送可能会导致其他协作者的工作受到影响，谨慎操作。
2. 部分文件更新的替代方案：  
   如果只是想在本地保留修改，而不改动原提交的其他内容，可以使用 `git checkout` 恢复未修改的部分：
   git checkout HEAD <file>




三、撤销合并
撤销合并（merge）操作可以根据具体的情况采用不同的方式。Git 提供了几种方法来撤销合并，包括撤销合并提交、恢复合并前的状态，或者回退到合并之前的某个提交。以下是几种常见的撤销合并的方法：
1. 使用 `git reset` 撤销合并（适用于合并提交后未推送）
如果你已经完成了合并（已经执行了 `git merge`），但还没有推送到远程仓库，你可以使用 `git reset` 来撤销合并操作。`git reset` 会将你的分支回退到合并之前的状态。
步骤：
1. 查看提交历史：
   使用 `git log` 查看合并前的提交记录，找到合并前的提交哈希值。
   git log --oneline
2. 使用 `git reset` 回退到合并前的提交：
   假设合并前的提交哈希是 `abc123`，你可以执行以下命令：
   git reset --hard abc123
   `--hard` 选项会将你的工作目录、暂存区和分支指针全部回退到 `abc123` 提交时的状态。**注意：这会丢失你合并后的修改，如果这些修改很重要，请备份或先使用 `git stash` 保存它们。
2. 使用 `git reflog` 撤销合并（适用于已执行合并并推送到本地仓库）
如果你已经推送合并提交到本地仓库，并且想要撤销该合并，可以使用 `git reflog` 查看历史记录并回退到合并前的状态。
步骤：
1. 查看 `git reflog`：
   使用 `git reflog` 查看分支的历史记录，找到合并前的提交哈希值：
   git reflog
   `git reflog` 会列出所有操作，包括合并。你可以找到合并前的提交哈希值。
2. 回退到合并前的提交：
   假设合并前的提交哈希是 `abc123`，使用以下命令回退到该提交：
   git reset --hard abc123
   这会将分支重置到合并前的提交，并丢弃合并后的修改。
3. 使用 `git merge --abort`（如果遇到合并冲突时）
如果你在执行合并时遇到了冲突，并且想要撤销整个合并过程，可以使用 `git merge --abort` 来中止合并操作。
步骤：
1. 执行合并时遇到冲突：
   如果你正在执行 `git merge` 并且遇到冲突，可以使用以下命令中止合并并恢复到合并前的状态：
   git merge --abort
   这个命令会取消合并操作，并将分支恢复到合并开始之前的状态。
4. 使用 `git revert -m 1` 撤销合并提交（适用于已经推送到远程仓库）
如果你已经完成合并并推送到远程仓库，并且不希望直接回退到合并前的状态，可以使用 `git revert` 创建一个新的提交来撤销合并。
步骤：
1. 找到合并提交的哈希值：
   使用 `git log` 查看合并提交的哈希值。
   git log --oneline
2. 使用 `git revert` 撤销合并：
   假设合并提交的哈希值是 `abc123`，执行以下命令：
   git revert -m 1 abc123
   这里的 `-m 1` 表示撤销合并时保留第一个父提交（通常是你当前分支的提交）。Git 会生成一个新的提交，这个提交会撤销合并的更改。
   注意：`git revert` 不会删除提交历史，而是通过创建一个新的提交来反向撤销合并。这对于已经推送到远程仓库的合并操作非常有用，因为它不会改变提交历史。
总结
- **`git reset --hard`**：适用于本地合并且尚未推送到远程的情况，能够完全撤销合并并回到合并前的状态。
- **`git reflog`**：如果你已经执行了合并并且需要回退到某个历史提交，使用 `git reflog` 查找提交哈希并使用 `git reset --hard`。
- **`git merge --abort`**：在合并冲突时使用，撤销当前合并操作。
- **`git revert -m 1`**：适用于已经推送到远程仓库的合并，使用 `git revert` 来创建一个新的撤销合并的提交。



四、孤立提交，未被引用
这个警告表明你当前的 `6271377 250107--PID调速001` 提交并没有被任何分支引用，因此它是“孤立的”，即没有任何分支指向它。这通常发生在你切换分支、重置分支或删除分支后，某些提交仍然存在，但不再属于任何分支。
警告中的信息告诉你，如果你希望保留这个提交，可以创建一个新的分支来引用它。
解决方案：
1. 创建一个新分支来保留这个提交
   如果你想保留这个孤立的提交，可以创建一个新的分支来指向这个提交。你可以按照警告中的提示，使用以下命令创建一个新的分支：
   git branch new-branch-name 6271377
   替换 `new-branch-name` 为你想要的分支名称，`6271377` 是孤立提交的哈希值。这将创建一个新的分支，并将它指向该孤立的提交。
2. 查看孤立提交的内容
   如果你只想查看孤立提交的内容，可以使用 `git show` 命令：
   git show 6271377
   这会显示提交 `6271377` 的详细信息，包括修改的文件、提交信息等。
3. 删除孤立的提交
   如果你不需要保留这个孤立提交，可以忽略这个警告，它将不会影响你的当前分支。Git 会在一段时间后自动清理未引用的提交。
   如果你确定不再需要该提交，并希望将其删除，可以运行：
   git reflog expire --expire=now --all
   git gc --prune=now
   这将清理所有未引用的提交，释放空间。




五、将一个分支合并到你想要的目标分支中，可以使用 Git 的合并命令 `git merge`。以下是详细步骤：
1. 切换到目标分支
确保你切换到想要合并到的分支。
git checkout <target_branch>
示例：
git checkout main
2. 合并源分支
在目标分支中，运行以下命令将源分支合并到当前分支：
git merge <source_branch>
示例：
git merge feature-branch
3. 解决冲突（如果有）
如果两个分支有修改相同文件的地方，Git 会提示冲突，文件中会标记冲突部分。解决冲突后，按照以下步骤完成合并：
1. 编辑冲突的文件，保留需要的修改内容。
2. 标记冲突已解决：
   git add <conflict_file>
3. 完成合并：
   git commit
4. 检查合并结果
运行以下命令确认合并是否成功：
git log --oneline --graph
你会看到分支历史显示合并的记录。





六、本地远程仓库
你可以通过在本地网络上创建一个共享文件夹，并将其用作 Git 仓库来模拟远程仓库。这种方式使得其他人可以通过同一个网络访问并与之同步。以下是实现步骤：
### **1. 创建共享文件夹**
首先，你需要在本地计算机上创建一个共享文件夹，该文件夹将充当 Git 仓库的存储位置。
#### **Windows 操作系统**
1. **创建文件夹**：
   - 右键点击文件资源管理器中的任意位置，选择 **新建 > 文件夹**，然后命名为例如 `git-repo`。  
2. **共享文件夹**：
   - 右键点击你创建的文件夹，选择 **属性**。
   - 进入 **共享** 标签页，点击 **高级共享**。
   - 勾选 **共享此文件夹**，并可以设置共享名称（例如 `git-repo`），确保选择的权限为 **读取/写入**。  
3. **获取共享路径**：
   - 共享后，你可以看到一个网络路径，例如：`\\<你的电脑名称>\git-repo`。
### **2. 初始化 Git 仓库**
在你创建的共享文件夹中初始化一个 Git 仓库：
#### **在共享文件夹中初始化 Git 仓库**：
cd /path/to/git-repo
git init --bare
- `--bare` 参数表示这是一个裸仓库，适用于作为远程仓库，不包含工作区。
这样，`git-repo` 目录就变成了一个 Git 仓库，其他人可以通过网络访问它。
### **3. 其他人如何访问该共享仓库**
其他人需要做以下步骤才能将共享文件夹用作远程仓库：
#### **Windows 用户**
1. **映射网络驱动器**（或直接访问共享文件夹）：
   - 打开文件资源管理器，输入共享路径（如 `\\<你的电脑名称>\git-repo`）并访问。
   - 或者，可以通过右键点击 **此电脑** > **映射网络驱动器**，输入 `\\<你的电脑名称>\git-repo`。
2. **将本地仓库推送到共享仓库**：
   假设你的仓库目录是 `C:\project`，可以使用以下命令将本地仓库推送到共享仓库：
   git remote add origin //你的电脑名称/git-repo
   git push origin master
### **4. 多人协作操作**
1. **从共享仓库拉取更新**：
   如果其他人已经提交了更新，你可以通过以下命令将他们的更改拉取到本地：
   git pull origin master
2. **多人提交**：
   其他用户可以根据上述步骤克隆或添加 `origin` 远程仓库，并将本地更改推送到共享文件夹中。
### **5. 注意事项**
- **网络访问**：确保所有参与者都在同一个网络上，且网络共享设置正确。防火墙和安全软件可能需要配置以允许网络共享。
- **冲突管理**：多人同时操作同一个仓库时，可能会遇到冲突。尽量在每次提交前先拉取（`git pull`）并解决可能的冲突。
- **权限管理**：确保每个人都有适当的访问权限，以便进行提交和拉取操作。
